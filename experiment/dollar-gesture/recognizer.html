<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>$1 Recognizer</title>
  <style>
    body {
      background: #fefefe;
      font-family: Helvetica, Arial, sans-serif;
    }
    #content {
      text-align: center;
      width: 420px;
      margin: 0 auto;
    }
    textarea {
      width: 100%;
      height: 60px;
    }
    #status {
      position: relative;
      margin-top: -28px;
    }
    .gesture {
      background: #ddd;
      margin-bottom: 30px;
    }
  </style>
</head>
<body>
  <div id="content">
    <h1>Gesture Editor</h1>
    <canvas id="myCanvas" width="420" height="400" style="background-color:#dddddd" oncontextmenu="return false;">
      <span style="background-color:#ffff88;">The &lt;canvas&gt; element is not supported by this browser.</span>
    </canvas>
    <p id="status">&nbsp;</p>
    <textarea id="points-result"></textarea>
    <div>
      <h2>Predefined gestures:</h2>
      <div id="predefined"></div>
    </div>
  </div>
  <script type="text/javascript" src="dollar.js"></script>
  <script type="text/javascript" src="../../javascripts/modeset/canvas_util.js"></script>
  <script type="text/javascript" src="../../javascripts/modeset/mobile-util.js"></script>
  <script type="text/javascript" src="../../javascripts/modeset/css-helper.js"></script>
  <script type="text/javascript" src="../../javascripts/modeset/mouse-and-touch-tracker.js"></script>
  <script src="//js.leapmotion.com/0.2.1/leap.min.js"></script>
  <script type="text/javascript">
    // add to Dollar's point method
    Point.prototype.toString = function(){
      return "Point(" + Math.round(this.X) + "," + Math.round(this.Y) + ")";
    };

    // set up editing interface
    var _points,
        _pointsResult, 
        _dollar, 
        _ctx, 
        _touchTracker, 
        _status, 
        _imageLayers, 
        _layerGestures,
        _canvas;

    function init()
    {
      _points = new Array();
      _dollar = new DollarRecognizer();

      _canvas = document.getElementById('myCanvas');
      _ctx = _canvas.getContext('2d');
      styleCanvas(_ctx);

      _status = document.getElementById('status');
      _pointsResult = document.getElementById('points-result');

      initCustomGestures();
      initGestureList();
      initTouch();
      initImageLayers();
    }

    function styleCanvas(context) {
      context.fillStyle = "rgb(0,0,225)";
      context.strokeStyle = "rgb(0,0,225)";
      context.lineWidth = 3;
      context.font = "16px Arial";
      context.fillStyle = "rgb(255,255,136)";
      context.fillRect(0, 0, context.width, context.height);

    }

    function initGestureList() {
      var predefined = document.getElementById('predefined');
      for(var i=0; i < _dollar.Unistrokes.length; i++ ) {
        var gesture = _dollar.Unistrokes[i];
        var title = '<p>'+ gesture.Name +'</p>';
        var points = gesture.Points;

        var newCanvas = document.createElement('canvas');
        newCanvas.width = 420;
        newCanvas.height = 400;
        var newContext = newCanvas.getContext('2d');
        styleCanvas(newContext);
        newContext.translate(newCanvas.width / 2, newCanvas.height / 2);
        newContext.fillRect(points[0].X - 4, points[0].Y - 3, 9, 9);
        for(var j=0; j < points.length - 1; j++ ) {
          drawConnectedPoint(newContext, points[j], points[j+1]);
        }

        var gestureContainer = document.createElement('div');
        gestureContainer.className = 'gesture';
        gestureContainer.innerHTML = title;
        gestureContainer.appendChild(newCanvas);
        predefined.appendChild(gestureContainer);
      }
    }

    function initCustomGestures( topHalf ) {
      _dollar.Unistrokes = [];
      // add custom gestures
      _dollar.AddGesture("box-1", [ new Point(146,98), new Point(147,98), new Point(148,98), new Point(149,98), new Point(150,98), new Point(151,98), new Point(153,98), new Point(153,98), new Point(155,98), new Point(156,98), new Point(158,98), new Point(160,98), new Point(161,98), new Point(162,98), new Point(164,98), new Point(167,98), new Point(168,98), new Point(169,98), new Point(172,98), new Point(174,98), new Point(175,98), new Point(177,98), new Point(182,98), new Point(183,98), new Point(186,98), new Point(188,98), new Point(190,98), new Point(191,98), new Point(194,98), new Point(196,98), new Point(197,98), new Point(199,98), new Point(202,98), new Point(203,98), new Point(205,99), new Point(205,99), new Point(207,99), new Point(210,99), new Point(211,99), new Point(212,99), new Point(213,99), new Point(216,99), new Point(217,99), new Point(218,99), new Point(219,99), new Point(219,99), new Point(220,99), new Point(221,99), new Point(223,99), new Point(224,99), new Point(226,99), new Point(226,99), new Point(227,99), new Point(228,99), new Point(232,99), new Point(234,99), new Point(234,99), new Point(234,100), new Point(234,101), new Point(234,106), new Point(234,106), new Point(234,109), new Point(234,113), new Point(234,114), new Point(234,119), new Point(234,121), new Point(233,128), new Point(233,131), new Point(233,135), new Point(233,142), new Point(233,143), new Point(233,150), new Point(233,151), new Point(233,158), new Point(233,159), new Point(233,165), new Point(233,167), new Point(233,172), new Point(233,175), new Point(233,180), new Point(232,187), new Point(232,187), new Point(232,194), new Point(232,195), new Point(230,201), new Point(230,201), new Point(230,205), new Point(230,209), new Point(230,209), new Point(230,213), new Point(230,215), new Point(230,216), new Point(230,218), new Point(230,220), new Point(230,222), new Point(230,223), new Point(230,224), new Point(230,227), new Point(229,230), new Point(229,232), new Point(229,234), new Point(229,236), new Point(229,237), new Point(229,238), new Point(229,238), new Point(229,240), new Point(229,241), new Point(229,243), new Point(229,245), new Point(229,245), new Point(227,245), new Point(223,245), new Point(222,245), new Point(221,245), new Point(217,245), new Point(215,245), new Point(214,245), new Point(213,245), new Point(211,245), new Point(207,245), new Point(205,245), new Point(200,245), new Point(199,245), new Point(195,245), new Point(192,245), new Point(191,245), new Point(186,245), new Point(185,245), new Point(183,245), new Point(179,244), new Point(178,244), new Point(175,244), new Point(171,243), new Point(170,243), new Point(169,243), new Point(168,243), new Point(165,243), new Point(163,243), new Point(163,243), new Point(162,242), new Point(161,242), new Point(160,242), new Point(159,242), new Point(157,242), new Point(156,242), new Point(155,242), new Point(153,242), new Point(150,241), new Point(149,241), new Point(149,241), new Point(149,240), new Point(146,240), new Point(145,240), new Point(144,240), new Point(143,240), new Point(143,240), new Point(142,239), new Point(142,237), new Point(142,234), new Point(142,233), new Point(142,232), new Point(142,230), new Point(142,226), new Point(142,226), new Point(141,225), new Point(141,221), new Point(141,218), new Point(141,218), new Point(141,214), new Point(141,211), new Point(141,210), new Point(141,207), new Point(141,205), new Point(141,204), new Point(141,200), new Point(141,196), new Point(141,192), new Point(141,189), new Point(141,185), new Point(141,182), new Point(141,182), new Point(141,178), new Point(141,175), new Point(141,174), new Point(141,172), new Point(141,169), new Point(141,167), new Point(141,166), new Point(141,165), new Point(141,163), new Point(141,161), new Point(141,160), new Point(141,158), new Point(141,156), new Point(141,152), new Point(141,152), new Point(141,151), new Point(141,150), new Point(141,148), new Point(141,145), new Point(141,145), new Point(141,140), new Point(141,138), new Point(141,138), new Point(141,136), new Point(142,134), new Point(142,132), new Point(143,131), new Point(143,130), new Point(143,127), new Point(143,124), new Point(143,124), new Point(144,119), new Point(144,117), new Point(144,116), new Point(144,115), new Point(144,114), new Point(144,112), new Point(145,111), new Point(145,109), new Point(145,109), new Point(145,107), new Point(145,105), new Point(145,104), new Point(145,103), new Point(145,102), new Point(145,102) ] );
      _dollar.AddGesture("box-2", [ new Point(151,107), new Point(151,108), new Point(151,109), new Point(151,111), new Point(151,113), new Point(152,113), new Point(152,114), new Point(152,117), new Point(153,120), new Point(154,121), new Point(154,121), new Point(154,123), new Point(155,126), new Point(155,128), new Point(156,132), new Point(156,136), new Point(156,137), new Point(156,143), new Point(156,143), new Point(158,146), new Point(158,150), new Point(158,150), new Point(159,157), new Point(159,158), new Point(159,161), new Point(159,165), new Point(159,168), new Point(159,173), new Point(159,175), new Point(160,180), new Point(160,181), new Point(160,182), new Point(160,186), new Point(160,188), new Point(160,189), new Point(160,195), new Point(160,196), new Point(160,197), new Point(160,199), new Point(162,202), new Point(162,203), new Point(162,205), new Point(162,206), new Point(162,208), new Point(162,210), new Point(162,212), new Point(162,216), new Point(162,218), new Point(162,219), new Point(162,223), new Point(162,225), new Point(162,226), new Point(162,227), new Point(162,229), new Point(162,233), new Point(162,235), new Point(162,237), new Point(162,239), new Point(162,240), new Point(162,241), new Point(162,244), new Point(162,245), new Point(162,246), new Point(162,247), new Point(162,248), new Point(162,248), new Point(162,249), new Point(162,250), new Point(162,251), new Point(163,251), new Point(165,251), new Point(167,251), new Point(168,251), new Point(173,251), new Point(175,251), new Point(181,249), new Point(182,249), new Point(188,249), new Point(190,249), new Point(195,248), new Point(197,247), new Point(203,246), new Point(204,246), new Point(211,245), new Point(212,245), new Point(217,243), new Point(219,242), new Point(224,241), new Point(227,241), new Point(229,241), new Point(232,240), new Point(234,240), new Point(236,240), new Point(240,239), new Point(242,239), new Point(242,239), new Point(244,239), new Point(247,238), new Point(249,238), new Point(250,238), new Point(251,237), new Point(253,237), new Point(254,236), new Point(255,236), new Point(256,235), new Point(256,235), new Point(260,235), new Point(261,234), new Point(262,234), new Point(262,233), new Point(262,233), new Point(262,232), new Point(262,230), new Point(262,229), new Point(262,228), new Point(262,226), new Point(262,226), new Point(260,223), new Point(260,220), new Point(259,219), new Point(257,217), new Point(257,215), new Point(257,212), new Point(256,209), new Point(256,205), new Point(256,205), new Point(255,200), new Point(254,198), new Point(253,195), new Point(252,190), new Point(252,190), new Point(251,187), new Point(250,183), new Point(250,182), new Point(250,177), new Point(249,175), new Point(249,174), new Point(249,171), new Point(248,168), new Point(248,168), new Point(248,164), new Point(246,161), new Point(246,161), new Point(246,158), new Point(245,155), new Point(244,154), new Point(243,154), new Point(243,151), new Point(243,149), new Point(243,147), new Point(243,144), new Point(243,142), new Point(243,140), new Point(243,140), new Point(242,138), new Point(242,135), new Point(242,133), new Point(242,132), new Point(240,126), new Point(240,125), new Point(240,121), new Point(239,118), new Point(239,117), new Point(238,116), new Point(238,112), new Point(238,110), new Point(238,110), new Point(237,108), new Point(237,106), new Point(236,106), new Point(236,104), new Point(236,104), new Point(236,101), new Point(236,100), new Point(236,99), new Point(236,98), new Point(236,97), new Point(235,97), new Point(235,97), new Point(234,97), new Point(233,97), new Point(232,97), new Point(230,97), new Point(229,97), new Point(228,98), new Point(224,99), new Point(223,99), new Point(220,99), new Point(220,99), new Point(218,100), new Point(215,101), new Point(214,101), new Point(213,101), new Point(212,101), new Point(209,102), new Point(207,102), new Point(206,102), new Point(205,102), new Point(203,103), new Point(200,103), new Point(198,103), new Point(198,103), new Point(196,103), new Point(194,103), new Point(192,105), new Point(191,105), new Point(190,105), new Point(189,105), new Point(187,105), new Point(185,105), new Point(184,105), new Point(183,105), new Point(182,106), new Point(179,106), new Point(177,106), new Point(176,106), new Point(175,106), new Point(174,106), new Point(173,106), new Point(172,106), new Point(171,107), new Point(169,107), new Point(169,107), new Point(168,108), new Point(166,108), new Point(165,108), new Point(164,108), new Point(163,108), new Point(162,108), new Point(162,108), new Point(161,108), new Point(160,109), new Point(159,109), new Point(158,109), new Point(157,109), new Point(156,109), new Point(155,109) ] );
      _dollar.AddGesture("box-3", [ new Point(124,140), new Point(123,140), new Point(124,140), new Point(125,139), new Point(129,139), new Point(130,139), new Point(135,139), new Point(137,139), new Point(142,139), new Point(145,139), new Point(149,139), new Point(155,139), new Point(156,139), new Point(163,139), new Point(170,139), new Point(170,139), new Point(177,138), new Point(184,138), new Point(190,137), new Point(191,137), new Point(198,137), new Point(205,137), new Point(205,137), new Point(211,136), new Point(218,135), new Point(225,135), new Point(230,134), new Point(232,134), new Point(239,133), new Point(241,133), new Point(246,133), new Point(249,133), new Point(253,133), new Point(256,133), new Point(260,133), new Point(264,133), new Point(267,133), new Point(267,133), new Point(270,133), new Point(271,133), new Point(272,133), new Point(273,133), new Point(274,133), new Point(275,133), new Point(277,133), new Point(280,133), new Point(280,133), new Point(280,135), new Point(280,136), new Point(279,139), new Point(279,140), new Point(279,147), new Point(279,149), new Point(279,154), new Point(279,157), new Point(279,161), new Point(279,165), new Point(279,168), new Point(279,172), new Point(279,175), new Point(279,180), new Point(279,182), new Point(279,188), new Point(279,189), new Point(279,194), new Point(279,195), new Point(279,199), new Point(279,201), new Point(279,202), new Point(279,202), new Point(279,203), new Point(278,203), new Point(275,203), new Point(273,203), new Point(272,203), new Point(267,203), new Point(266,203), new Point(262,203), new Point(259,202), new Point(254,201), new Point(252,201), new Point(245,201), new Point(240,201), new Point(238,201), new Point(231,201), new Point(229,201), new Point(225,201), new Point(220,201), new Point(218,201), new Point(211,200), new Point(207,200), new Point(204,200), new Point(199,200), new Point(197,200), new Point(190,200), new Point(189,200), new Point(183,200), new Point(181,200), new Point(176,199), new Point(173,198), new Point(169,198), new Point(163,198), new Point(162,198), new Point(157,198), new Point(156,198), new Point(151,198), new Point(149,198), new Point(146,198), new Point(142,198), new Point(142,198), new Point(135,198), new Point(135,198), new Point(132,198), new Point(131,198), new Point(131,196), new Point(131,195), new Point(131,194), new Point(131,188), new Point(131,187), new Point(131,183), new Point(131,181), new Point(131,179), new Point(131,175), new Point(131,174), new Point(131,172), new Point(131,167), new Point(131,164), new Point(131,160), new Point(131,160), new Point(131,157), new Point(131,154), new Point(131,153), new Point(131,153), new Point(131,151), new Point(131,149), new Point(131,148), new Point(131,147), new Point(131,144), new Point(131,143), new Point(131,142), new Point(132,141), new Point(132,140), new Point(132,140) ] );
      
      if( topHalf == true || topHalf == null ) {
        _dollar.AddGesture("head-1", [ new Point(162,277), new Point(162,276), new Point(162,275), new Point(162,274), new Point(162,273), new Point(162,271), new Point(163,269), new Point(163,268), new Point(163,267), new Point(163,265), new Point(163,263), new Point(163,260), new Point(163,258), new Point(163,258), new Point(163,256), new Point(163,254), new Point(163,252), new Point(163,249), new Point(163,248), new Point(163,246), new Point(163,243), new Point(163,241), new Point(163,238), new Point(163,237), new Point(163,235), new Point(163,232), new Point(163,230), new Point(163,229), new Point(163,229), new Point(163,227), new Point(163,223), new Point(163,221), new Point(163,219), new Point(163,218), new Point(164,215), new Point(164,213), new Point(164,211), new Point(164,209), new Point(164,209), new Point(164,207), new Point(164,205), new Point(164,202), new Point(164,201), new Point(164,200), new Point(164,199), new Point(164,198), new Point(164,197), new Point(164,195), new Point(164,194), new Point(163,193), new Point(163,191), new Point(163,191), new Point(162,190), new Point(161,189), new Point(158,185), new Point(158,184), new Point(157,183), new Point(155,181), new Point(154,179), new Point(152,177), new Point(151,176), new Point(149,174), new Point(146,171), new Point(144,168), new Point(144,168), new Point(142,166), new Point(139,162), new Point(138,161), new Point(138,160), new Point(137,158), new Point(137,153), new Point(137,152), new Point(135,147), new Point(135,143), new Point(135,142), new Point(135,138), new Point(135,132), new Point(135,132), new Point(136,127), new Point(137,123), new Point(137,120), new Point(137,115), new Point(138,113), new Point(140,111), new Point(142,107), new Point(144,106), new Point(145,105), new Point(148,102), new Point(149,100), new Point(150,99), new Point(151,98), new Point(153,97), new Point(155,93), new Point(157,92), new Point(160,90), new Point(163,88), new Point(165,87), new Point(169,86), new Point(172,85), new Point(174,84), new Point(175,83), new Point(181,82), new Point(183,81), new Point(188,79), new Point(193,79), new Point(193,79), new Point(197,78), new Point(199,78), new Point(202,78), new Point(204,78), new Point(208,78), new Point(212,78), new Point(215,78), new Point(220,78), new Point(222,78), new Point(227,78), new Point(231,78), new Point(233,78), new Point(241,80), new Point(241,80), new Point(248,81), new Point(250,82), new Point(254,83), new Point(258,85), new Point(259,86), new Point(264,88), new Point(268,90), new Point(268,90), new Point(273,93), new Point(276,95), new Point(277,95), new Point(281,101), new Point(282,102), new Point(284,105), new Point(286,108), new Point(287,111), new Point(288,113), new Point(290,118), new Point(290,120), new Point(290,122), new Point(290,125), new Point(290,129), new Point(290,129), new Point(290,132), new Point(290,135), new Point(290,137), new Point(290,139), new Point(290,141), new Point(289,144), new Point(287,148), new Point(287,148), new Point(286,151), new Point(285,153), new Point(285,155), new Point(284,157), new Point(284,158), new Point(282,161), new Point(282,163), new Point(281,165), new Point(281,166), new Point(281,167), new Point(279,170), new Point(277,174), new Point(277,175), new Point(275,177), new Point(274,179), new Point(272,183), new Point(272,183), new Point(271,184), new Point(269,186), new Point(266,191), new Point(266,191), new Point(264,193), new Point(261,196), new Point(260,198), new Point(259,199), new Point(256,201), new Point(255,203), new Point(254,205), new Point(254,205), new Point(253,208), new Point(253,210), new Point(253,214), new Point(253,215), new Point(253,218), new Point(252,225), new Point(252,226), new Point(252,231), new Point(252,234), new Point(252,236), new Point(252,242), new Point(252,244), new Point(252,246), new Point(252,250), new Point(252,253), new Point(252,254), new Point(252,255), new Point(252,257), new Point(252,258), new Point(252,261), new Point(252,263), new Point(252,264), new Point(252,265), new Point(253,267), new Point(253,269), new Point(253,271), new Point(253,272), new Point(253,273), new Point(253,276), new Point(252,277), new Point(251,277), new Point(250,277), new Point(248,278), new Point(247,279), new Point(247,279), new Point(243,279), new Point(242,279), new Point(240,280), new Point(238,280), new Point(237,280), new Point(234,281), new Point(232,281), new Point(230,281), new Point(228,281), new Point(228,281), new Point(226,281), new Point(223,281), new Point(220,281), new Point(219,281), new Point(216,281), new Point(213,281), new Point(209,281), new Point(208,281), new Point(205,281), new Point(202,281), new Point(200,281), new Point(199,281), new Point(198,281), new Point(196,280), new Point(194,280), new Point(192,280), new Point(190,279), new Point(190,279), new Point(188,279), new Point(186,279), new Point(185,279), new Point(184,279), new Point(182,279), new Point(181,279), new Point(180,279), new Point(180,279), new Point(179,279), new Point(178,279), new Point(177,278), new Point(175,278), new Point(174,278), new Point(173,278), new Point(171,278) ] );
        _dollar.AddGesture("head-2", [ new Point(140,259), new Point(140,258), new Point(140,256), new Point(140,254), new Point(140,253), new Point(141,252), new Point(142,249), new Point(142,247), new Point(142,245), new Point(143,242), new Point(143,241), new Point(143,239), new Point(144,236), new Point(144,235), new Point(144,232), new Point(145,230), new Point(145,228), new Point(146,224), new Point(146,223), new Point(148,220), new Point(149,218), new Point(150,214), new Point(150,213), new Point(151,211), new Point(152,207), new Point(152,205), new Point(153,201), new Point(154,199), new Point(154,195), new Point(155,191), new Point(156,189), new Point(157,184), new Point(157,183), new Point(158,177), new Point(158,176), new Point(159,171), new Point(159,170), new Point(161,166), new Point(161,165), new Point(162,160), new Point(162,158), new Point(163,154), new Point(163,154), new Point(164,151), new Point(164,148), new Point(164,147), new Point(167,143), new Point(168,142), new Point(169,141), new Point(170,139), new Point(170,138), new Point(171,137), new Point(171,135), new Point(173,133), new Point(173,132), new Point(174,129), new Point(176,127), new Point(176,127), new Point(177,126), new Point(178,124), new Point(179,123), new Point(180,122), new Point(182,118), new Point(182,118), new Point(183,117), new Point(184,117), new Point(185,116), new Point(187,114), new Point(187,114), new Point(189,114), new Point(189,113), new Point(191,113), new Point(192,113), new Point(192,113), new Point(193,113), new Point(194,114), new Point(194,115), new Point(195,117), new Point(195,117), new Point(195,119), new Point(196,121), new Point(197,123), new Point(198,124), new Point(198,125), new Point(199,127), new Point(199,128), new Point(200,130), new Point(200,132), new Point(201,134), new Point(201,134), new Point(202,135), new Point(202,138), new Point(202,139), new Point(202,140), new Point(203,142), new Point(203,144), new Point(204,145), new Point(204,146), new Point(204,149), new Point(204,151), new Point(204,151), new Point(204,154), new Point(205,157), new Point(206,158), new Point(206,161), new Point(207,163), new Point(207,164), new Point(207,167), new Point(207,169), new Point(207,170), new Point(207,172), new Point(208,174), new Point(209,178), new Point(209,179), new Point(210,180), new Point(210,181), new Point(210,183), new Point(210,186), new Point(210,186), new Point(210,188), new Point(211,190), new Point(211,192), new Point(211,192), new Point(211,194), new Point(212,196), new Point(213,198), new Point(213,199), new Point(213,201), new Point(213,203), new Point(213,204), new Point(213,205), new Point(213,207), new Point(213,210), new Point(213,210), new Point(214,212), new Point(214,214), new Point(214,215), new Point(214,218), new Point(214,220), new Point(214,221), new Point(214,222), new Point(214,223), new Point(214,226), new Point(214,227), new Point(214,227), new Point(215,229), new Point(215,231), new Point(215,233), new Point(215,233), new Point(215,234), new Point(215,238), new Point(215,239), new Point(215,241), new Point(215,242), new Point(215,243), new Point(215,245), new Point(215,246), new Point(215,249), new Point(215,250), new Point(215,251), new Point(215,251), new Point(215,252), new Point(215,253), new Point(214,254), new Point(213,255), new Point(213,256), new Point(212,256), new Point(212,256), new Point(211,257), new Point(211,258), new Point(209,258), new Point(208,258), new Point(206,259), new Point(204,259), new Point(203,260), new Point(202,260), new Point(202,260), new Point(198,260), new Point(198,261), new Point(197,261), new Point(195,261), new Point(193,261), new Point(191,261), new Point(190,261), new Point(189,261), new Point(186,261), new Point(185,261), new Point(183,261), new Point(180,261), new Point(179,261), new Point(177,261), new Point(175,261), new Point(173,261), new Point(172,261), new Point(167,261), new Point(167,261), new Point(165,261), new Point(164,261), new Point(163,261), new Point(162,261), new Point(161,261), new Point(161,261), new Point(160,261), new Point(159,261), new Point(158,261), new Point(157,261), new Point(156,261), new Point(155,261), new Point(155,261), new Point(154,261), new Point(153,261), new Point(152,261), new Point(151,261), new Point(150,261), new Point(149,261) ] );
        _dollar.AddGesture("head-3", [ new Point(139,253), new Point(139,252), new Point(139,251), new Point(140,249), new Point(141,248), new Point(141,247), new Point(143,243), new Point(143,242), new Point(143,241), new Point(143,241), new Point(145,238), new Point(146,236), new Point(146,235), new Point(146,234), new Point(147,233), new Point(148,229), new Point(148,229), new Point(149,229), new Point(149,226), new Point(150,224), new Point(150,223), new Point(150,221), new Point(152,219), new Point(152,217), new Point(152,217), new Point(153,217), new Point(154,213), new Point(154,212), new Point(154,212), new Point(155,209), new Point(156,209), new Point(157,207), new Point(157,206), new Point(157,204), new Point(158,203), new Point(158,202), new Point(159,201), new Point(159,201), new Point(159,198), new Point(160,195), new Point(161,194), new Point(161,194), new Point(161,192), new Point(162,191), new Point(163,189), new Point(163,189), new Point(163,188), new Point(164,187), new Point(164,186), new Point(165,186), new Point(166,184), new Point(166,184), new Point(167,182), new Point(168,181), new Point(170,181), new Point(171,180), new Point(173,179), new Point(175,179), new Point(177,177), new Point(177,177), new Point(179,177), new Point(181,175), new Point(182,175), new Point(184,175), new Point(186,175), new Point(188,174), new Point(189,174), new Point(191,174), new Point(194,174), new Point(195,174), new Point(196,174), new Point(197,174), new Point(200,174), new Point(201,174), new Point(202,174), new Point(205,174), new Point(208,174), new Point(209,174), new Point(210,174), new Point(212,174), new Point(214,174), new Point(216,174), new Point(216,174), new Point(219,174), new Point(221,174), new Point(222,174), new Point(224,174), new Point(227,174), new Point(228,174), new Point(229,174), new Point(229,174), new Point(232,174), new Point(233,174), new Point(234,174), new Point(236,174), new Point(236,174), new Point(237,174), new Point(240,174), new Point(242,174), new Point(242,174), new Point(242,175), new Point(244,175), new Point(246,176), new Point(248,176), new Point(250,176), new Point(251,176), new Point(253,176), new Point(254,176), new Point(254,176), new Point(255,176), new Point(256,177), new Point(257,177), new Point(258,177), new Point(259,177), new Point(260,177), new Point(260,177), new Point(261,178), new Point(263,178), new Point(264,178), new Point(265,178), new Point(265,179), new Point(266,179), new Point(266,179), new Point(267,179), new Point(267,180), new Point(269,180), new Point(270,181), new Point(271,181), new Point(271,181), new Point(272,182), new Point(272,183), new Point(273,184), new Point(273,185), new Point(275,185), new Point(275,185), new Point(275,187), new Point(276,189), new Point(276,190), new Point(277,190), new Point(277,190), new Point(277,193), new Point(278,195), new Point(279,196), new Point(279,196), new Point(280,199), new Point(280,200), new Point(281,203), new Point(281,203), new Point(282,205), new Point(282,207), new Point(283,209), new Point(283,209), new Point(284,210), new Point(285,213), new Point(285,215), new Point(285,215), new Point(286,217), new Point(286,218), new Point(287,220), new Point(287,221), new Point(288,223), new Point(289,224), new Point(289,225), new Point(289,226), new Point(290,227), new Point(290,228), new Point(291,229), new Point(291,230), new Point(292,231), new Point(292,232), new Point(292,233), new Point(292,233), new Point(293,233), new Point(293,235), new Point(294,235), new Point(294,238), new Point(294,238), new Point(294,239), new Point(294,240), new Point(294,241), new Point(294,242), new Point(294,243), new Point(294,244), new Point(294,244), new Point(293,245), new Point(293,246), new Point(293,247), new Point(293,248), new Point(292,248), new Point(292,249), new Point(292,250), new Point(292,250), new Point(290,250), new Point(289,251), new Point(288,251), new Point(288,252), new Point(287,252), new Point(287,252), new Point(286,252), new Point(284,252), new Point(284,253), new Point(282,253), new Point(282,253), new Point(281,253), new Point(279,253), new Point(278,253), new Point(275,254), new Point(275,254), new Point(274,254), new Point(273,254), new Point(271,254), new Point(269,254), new Point(268,254), new Point(267,254), new Point(263,254), new Point(262,254), new Point(261,254), new Point(260,254), new Point(256,254), new Point(255,254), new Point(255,254), new Point(254,254), new Point(251,254), new Point(248,254), new Point(248,254), new Point(247,254), new Point(246,254), new Point(242,254), new Point(242,254), new Point(239,254), new Point(236,254), new Point(235,254), new Point(234,253), new Point(231,253), new Point(229,253), new Point(228,253), new Point(225,253), new Point(222,253), new Point(221,253), new Point(219,253), new Point(216,252), new Point(215,252), new Point(215,252), new Point(212,252), new Point(209,252), new Point(209,252), new Point(207,252), new Point(205,252), new Point(202,252), new Point(202,252), new Point(200,252), new Point(198,252), new Point(196,252), new Point(195,252), new Point(194,252), new Point(190,252), new Point(189,252), new Point(189,252), new Point(186,252), new Point(185,252), new Point(182,252), new Point(181,252), new Point(179,252), new Point(178,252), new Point(176,252), new Point(175,252), new Point(171,252), new Point(169,252), new Point(169,252), new Point(166,252), new Point(164,252), new Point(162,252), new Point(162,252), new Point(160,253), new Point(159,253), new Point(158,253), new Point(157,253), new Point(156,253), new Point(156,253), new Point(155,253), new Point(154,253), new Point(153,253), new Point(152,253), new Point(151,253), new Point(150,253), new Point(149,253) ] );
        _dollar.AddGesture("head-4", [ new Point(134,262), new Point(134,260), new Point(134,257), new Point(134,255), new Point(134,255), new Point(134,252), new Point(134,251), new Point(134,248), new Point(134,248), new Point(135,245), new Point(135,243), new Point(136,241), new Point(136,240), new Point(137,236), new Point(137,235), new Point(137,234), new Point(138,232), new Point(139,227), new Point(139,227), new Point(141,223), new Point(142,221), new Point(142,221), new Point(143,219), new Point(144,218), new Point(145,215), new Point(146,212), new Point(148,208), new Point(148,208), new Point(149,206), new Point(150,205), new Point(151,202), new Point(151,201), new Point(152,199), new Point(154,196), new Point(157,191), new Point(157,190), new Point(158,186), new Point(160,183), new Point(160,183), new Point(161,181), new Point(164,178), new Point(164,178), new Point(166,176), new Point(169,174), new Point(170,173), new Point(172,171), new Point(175,168), new Point(175,168), new Point(177,166), new Point(179,165), new Point(180,164), new Point(182,161), new Point(183,160), new Point(185,159), new Point(188,157), new Point(190,155), new Point(190,155), new Point(193,153), new Point(197,152), new Point(197,152), new Point(202,151), new Point(204,150), new Point(204,150), new Point(206,150), new Point(207,150), new Point(211,150), new Point(211,150), new Point(214,150), new Point(217,150), new Point(218,150), new Point(219,150), new Point(223,150), new Point(225,150), new Point(227,151), new Point(229,151), new Point(231,152), new Point(231,152), new Point(234,153), new Point(235,154), new Point(237,154), new Point(238,155), new Point(238,155), new Point(239,156), new Point(240,157), new Point(242,160), new Point(242,160), new Point(243,161), new Point(245,163), new Point(248,164), new Point(248,164), new Point(249,167), new Point(252,170), new Point(252,170), new Point(255,174), new Point(255,175), new Point(256,177), new Point(257,179), new Point(258,181), new Point(258,182), new Point(259,183), new Point(261,186), new Point(262,186), new Point(262,187), new Point(263,189), new Point(264,191), new Point(265,193), new Point(265,193), new Point(266,194), new Point(267,195), new Point(268,198), new Point(269,199), new Point(270,202), new Point(271,203), new Point(271,204), new Point(272,206), new Point(272,207), new Point(273,211), new Point(274,212), new Point(274,213), new Point(274,215), new Point(274,218), new Point(274,219), new Point(274,221), new Point(274,223), new Point(274,225), new Point(274,226), new Point(274,229), new Point(274,231), new Point(274,233), new Point(274,233), new Point(274,235), new Point(274,236), new Point(274,237), new Point(275,239), new Point(275,240), new Point(275,243), new Point(276,243), new Point(276,245), new Point(276,246), new Point(276,247), new Point(276,249), new Point(278,251), new Point(278,252), new Point(278,253), new Point(278,256), new Point(278,258), new Point(278,260), new Point(278,260), new Point(278,262), new Point(278,263), new Point(278,265), new Point(278,266), new Point(278,267), new Point(278,267), new Point(278,268), new Point(277,268), new Point(274,270), new Point(273,270), new Point(272,270), new Point(271,271), new Point(270,271), new Point(269,271), new Point(267,271), new Point(266,271), new Point(265,271), new Point(263,271), new Point(261,271), new Point(259,271), new Point(259,271), new Point(256,271), new Point(254,271), new Point(252,271), new Point(249,271), new Point(245,271), new Point(245,271), new Point(243,271), new Point(241,271), new Point(238,271), new Point(238,271), new Point(237,271), new Point(234,270), new Point(232,270), new Point(231,270), new Point(230,270), new Point(226,270), new Point(224,270), new Point(223,270), new Point(220,270), new Point(217,269), new Point(216,269), new Point(211,267), new Point(211,267), new Point(208,267), new Point(204,267), new Point(203,267), new Point(201,267), new Point(198,267), new Point(196,267), new Point(193,267), new Point(190,267), new Point(189,267), new Point(186,267), new Point(184,267), new Point(183,267), new Point(182,267), new Point(181,267), new Point(178,267), new Point(175,267), new Point(175,267), new Point(173,267), new Point(171,267), new Point(168,267), new Point(168,267), new Point(166,267), new Point(165,267), new Point(162,267), new Point(161,267), new Point(160,267), new Point(158,267), new Point(157,267), new Point(155,267), new Point(154,267), new Point(151,267), new Point(149,267), new Point(147,267), new Point(147,267), new Point(145,267), new Point(142,267), new Point(141,267), new Point(140,267) ] );

        _dollar.AddGesture("arm-up-r", [ new Point(195,291), new Point(196,291), new Point(197,291), new Point(198,291), new Point(199,291), new Point(199,291), new Point(201,290), new Point(203,289), new Point(206,287), new Point(207,286), new Point(210,285), new Point(214,283), new Point(217,282), new Point(218,282), new Point(221,279), new Point(222,279), new Point(225,278), new Point(228,276), new Point(229,276), new Point(231,274), new Point(232,273), new Point(235,270), new Point(235,270), new Point(238,268), new Point(238,268), new Point(239,268), new Point(239,267), new Point(241,267), new Point(241,266), new Point(241,265), new Point(241,262), new Point(241,262), new Point(241,261), new Point(241,258), new Point(241,256), new Point(241,254), new Point(241,250), new Point(241,246), new Point(241,244), new Point(241,241), new Point(241,237), new Point(241,233), new Point(241,229), new Point(241,228), new Point(241,225), new Point(242,221), new Point(242,216), new Point(242,212), new Point(243,208), new Point(243,204), new Point(243,203), new Point(243,200), new Point(244,196), new Point(244,192), new Point(244,187), new Point(245,183), new Point(245,179), new Point(246,175), new Point(246,171), new Point(246,167), new Point(247,162), new Point(247,159), new Point(247,158), new Point(248,154), new Point(249,150), new Point(250,146), new Point(250,144), new Point(250,142), new Point(250,140), new Point(250,139), new Point(251,139), new Point(251,139), new Point(252,139), new Point(253,139), new Point(253,138), new Point(254,138), new Point(254,138), new Point(256,138), new Point(259,138), new Point(259,138), new Point(263,138), new Point(267,137), new Point(271,137), new Point(271,137), new Point(275,136), new Point(279,135), new Point(283,134), new Point(285,134), new Point(287,134), new Point(292,134), new Point(296,134), new Point(300,134), new Point(302,134), new Point(304,134), new Point(308,134), new Point(312,134), new Point(314,134), new Point(317,134), new Point(321,133), new Point(322,133), new Point(325,133), new Point(327,133), new Point(329,133), new Point(329,133) ] );
        _dollar.AddGesture("arm-up-l", [ new Point(177,288), new Point(177,289), new Point(176,289), new Point(175,289), new Point(174,289), new Point(173,288), new Point(171,287), new Point(170,286), new Point(168,285), new Point(166,284), new Point(165,283), new Point(163,281), new Point(162,280), new Point(158,278), new Point(157,277), new Point(155,276), new Point(152,273), new Point(152,273), new Point(149,271), new Point(147,268), new Point(146,268), new Point(143,266), new Point(142,265), new Point(140,264), new Point(139,263), new Point(138,261), new Point(137,260), new Point(136,259), new Point(135,258), new Point(135,258), new Point(135,257), new Point(135,255), new Point(135,254), new Point(136,251), new Point(136,250), new Point(137,247), new Point(137,243), new Point(138,239), new Point(138,239), new Point(138,236), new Point(138,232), new Point(138,228), new Point(138,224), new Point(138,220), new Point(138,217), new Point(138,216), new Point(138,213), new Point(139,209), new Point(139,205), new Point(139,201), new Point(140,197), new Point(140,194), new Point(140,190), new Point(141,186), new Point(141,182), new Point(141,180), new Point(141,178), new Point(142,175), new Point(142,171), new Point(143,167), new Point(143,165), new Point(143,163), new Point(143,159), new Point(143,157), new Point(143,155), new Point(143,153), new Point(143,152), new Point(143,148), new Point(143,148), new Point(144,144), new Point(144,144), new Point(144,142), new Point(144,140), new Point(144,140), new Point(144,139), new Point(144,138), new Point(144,137), new Point(144,137), new Point(143,136), new Point(141,136), new Point(140,136), new Point(137,135), new Point(136,135), new Point(132,134), new Point(129,134), new Point(125,133), new Point(123,133), new Point(121,133), new Point(117,133), new Point(113,133), new Point(113,133), new Point(110,132), new Point(106,131), new Point(105,131), new Point(102,130), new Point(99,129), new Point(95,127), new Point(95,127), new Point(91,126), new Point(88,126), new Point(88,126), new Point(85,123), new Point(84,123), new Point(83,123), new Point(82,123), new Point(81,123), new Point(81,123) ] );
        _dollar.AddGesture("arm-2-r", [ new Point(207,149), new Point(208,149), new Point(208,150), new Point(208,151), new Point(209,152), new Point(210,153), new Point(212,155), new Point(212,155), new Point(214,157), new Point(215,158), new Point(216,159), new Point(218,161), new Point(220,163), new Point(222,165), new Point(223,166), new Point(224,167), new Point(226,169), new Point(228,171), new Point(229,172), new Point(230,173), new Point(232,175), new Point(234,178), new Point(235,179), new Point(236,180), new Point(237,182), new Point(239,184), new Point(241,187), new Point(242,189), new Point(244,191), new Point(244,191), new Point(246,193), new Point(247,196), new Point(248,197), new Point(249,198), new Point(251,200), new Point(251,201), new Point(253,202), new Point(254,203), new Point(255,204), new Point(256,204), new Point(257,206), new Point(257,206), new Point(257,207), new Point(258,208), new Point(258,208), new Point(258,209), new Point(259,210), new Point(259,211), new Point(259,211), new Point(260,212), new Point(261,213), new Point(261,213), new Point(262,213), new Point(263,214), new Point(263,215), new Point(265,216), new Point(265,216), new Point(266,216), new Point(267,217), new Point(267,217), new Point(267,218), new Point(268,218), new Point(269,219), new Point(269,219), new Point(270,220), new Point(271,221), new Point(271,221), new Point(271,222), new Point(271,223), new Point(271,224), new Point(271,224), new Point(272,224), new Point(272,225), new Point(272,225), new Point(273,226), new Point(273,227), new Point(274,228), new Point(274,228), new Point(275,228), new Point(276,228), new Point(276,228), new Point(277,229), new Point(277,230), new Point(276,230), new Point(276,230), new Point(275,230), new Point(275,231), new Point(274,231), new Point(273,231), new Point(272,232), new Point(272,232), new Point(271,232), new Point(269,233), new Point(269,233), new Point(267,233), new Point(266,233), new Point(264,233), new Point(261,234), new Point(261,234), new Point(258,234), new Point(257,234), new Point(255,234), new Point(252,234), new Point(251,234), new Point(250,234), new Point(247,235), new Point(244,236), new Point(244,236), new Point(242,237), new Point(241,237), new Point(240,238), new Point(240,239), new Point(240,239), new Point(242,241), new Point(242,241), new Point(244,242), new Point(246,243), new Point(247,244), new Point(249,245), new Point(251,247), new Point(251,247), new Point(254,249), new Point(254,249), new Point(256,250), new Point(258,252), new Point(258,252), new Point(261,253) ] );
        _dollar.AddGesture("arm-2-l", [ new Point(239,226), new Point(237,226), new Point(236,227), new Point(235,228), new Point(232,231), new Point(231,232), new Point(228,235), new Point(228,235), new Point(225,239), new Point(224,240), new Point(221,242), new Point(218,245), new Point(217,246), new Point(214,248), new Point(210,251), new Point(208,253), new Point(206,254), new Point(202,258), new Point(199,261), new Point(197,262), new Point(195,264), new Point(191,267), new Point(188,271), new Point(185,273), new Point(184,274), new Point(180,277), new Point(180,277), new Point(177,280), new Point(177,280), new Point(176,281), new Point(175,281), new Point(174,281), new Point(173,281), new Point(172,281), new Point(172,281), new Point(171,281), new Point(169,278), new Point(168,277), new Point(166,274), new Point(165,273), new Point(163,270), new Point(161,265), new Point(159,261), new Point(159,261), new Point(157,256), new Point(155,252), new Point(153,247), new Point(152,243), new Point(150,239), new Point(150,238), new Point(148,234), new Point(147,229), new Point(145,224), new Point(144,220), new Point(142,215), new Point(141,210), new Point(139,206), new Point(138,201), new Point(136,196), new Point(136,195), new Point(135,192), new Point(133,187), new Point(131,183), new Point(130,179), new Point(129,178), new Point(127,174), new Point(125,169), new Point(125,169), new Point(123,165), new Point(122,162), new Point(121,160), new Point(120,155), new Point(120,155), new Point(119,151), new Point(118,148), new Point(117,146), new Point(117,146), new Point(117,145), new Point(118,145), new Point(119,144), new Point(120,143), new Point(120,143), new Point(123,141), new Point(124,140), new Point(125,138), new Point(126,136), new Point(126,136), new Point(127,131), new Point(127,130), new Point(127,126), new Point(127,126), new Point(127,121), new Point(127,121), new Point(123,118), new Point(123,118), new Point(118,117), new Point(115,116), new Point(114,116), new Point(109,116), new Point(107,116), new Point(104,117), new Point(101,117), new Point(99,118), new Point(95,120), new Point(95,120), new Point(90,122), new Point(89,122), new Point(86,124), new Point(86,124) ] );
        _dollar.AddGesture("arm-3-r", [ new Point(228,295), new Point(228,294), new Point(228,292), new Point(228,291), new Point(228,291), new Point(228,289), new Point(228,288), new Point(228,288), new Point(228,284), new Point(228,281), new Point(228,281), new Point(228,277), new Point(228,274), new Point(228,270), new Point(228,267), new Point(228,263), new Point(228,260), new Point(228,257), new Point(228,256), new Point(228,253), new Point(228,249), new Point(228,246), new Point(228,242), new Point(228,238), new Point(228,235), new Point(228,235), new Point(228,231), new Point(228,228), new Point(229,224), new Point(229,221), new Point(229,217), new Point(229,217), new Point(229,214), new Point(229,210), new Point(229,207), new Point(229,203), new Point(229,203), new Point(229,200), new Point(229,196), new Point(229,195), new Point(229,193), new Point(229,191), new Point(229,189), new Point(229,189), new Point(229,187), new Point(229,185), new Point(229,185), new Point(230,182), new Point(230,181), new Point(230,179), new Point(230,178), new Point(230,176), new Point(231,175), new Point(231,175), new Point(231,174), new Point(231,173), new Point(231,172), new Point(231,172), new Point(231,171), new Point(231,170), new Point(233,170), new Point(234,170), new Point(236,169), new Point(236,169), new Point(239,169), new Point(241,169), new Point(243,169), new Point(247,168), new Point(249,168), new Point(250,168), new Point(253,166), new Point(256,164), new Point(259,163), new Point(262,161), new Point(264,160), new Point(266,159), new Point(269,158), new Point(272,156), new Point(275,155), new Point(278,153), new Point(282,152), new Point(285,150), new Point(288,149), new Point(290,148), new Point(291,147), new Point(294,146), new Point(297,144), new Point(300,142), new Point(303,140), new Point(306,138), new Point(307,138), new Point(310,137), new Point(313,135), new Point(316,134), new Point(317,133), new Point(319,132), new Point(319,132) ] );
        _dollar.AddGesture("arm-3-l", [ new Point(264,291), new Point(262,290), new Point(261,290), new Point(260,290), new Point(257,290), new Point(256,290), new Point(252,290), new Point(248,290), new Point(247,290), new Point(243,290), new Point(239,290), new Point(235,290), new Point(231,290), new Point(229,290), new Point(227,290), new Point(223,289), new Point(218,289), new Point(214,289), new Point(210,288), new Point(206,288), new Point(206,288), new Point(202,287), new Point(198,287), new Point(194,286), new Point(189,286), new Point(185,285), new Point(184,285), new Point(181,285), new Point(177,284), new Point(173,283), new Point(169,283), new Point(165,282), new Point(163,282), new Point(161,282), new Point(156,281), new Point(152,281), new Point(148,281), new Point(144,280), new Point(140,280), new Point(136,279), new Point(133,279), new Point(132,279), new Point(127,278), new Point(123,277), new Point(121,277), new Point(119,277), new Point(115,276), new Point(114,276), new Point(111,276), new Point(110,276), new Point(108,276), new Point(107,276), new Point(107,276), new Point(106,276), new Point(105,276), new Point(104,275), new Point(104,274), new Point(104,273), new Point(104,270), new Point(104,268), new Point(103,266), new Point(102,262), new Point(101,258), new Point(101,257), new Point(100,254), new Point(99,250), new Point(98,245), new Point(98,241), new Point(97,237), new Point(96,233), new Point(95,229), new Point(94,225), new Point(94,225), new Point(93,221), new Point(93,217), new Point(92,213), new Point(91,209), new Point(90,205), new Point(90,203), new Point(90,200), new Point(89,196), new Point(89,192), new Point(88,188), new Point(88,188), new Point(87,184), new Point(86,180), new Point(86,179), new Point(85,177), new Point(84,177), new Point(84,177) ] );
      }
      if( topHalf == false || topHalf == null ) {
        _dollar.AddGesture("foot-small-r", [ new Point(266,96), new Point(267,96), new Point(267,96), new Point(267,97), new Point(267,98), new Point(267,98), new Point(267,99), new Point(267,100), new Point(267,100), new Point(267,101), new Point(267,102), new Point(267,102), new Point(268,103), new Point(268,103), new Point(268,104), new Point(268,105), new Point(268,105), new Point(268,106), new Point(268,106), new Point(268,107), new Point(268,108), new Point(268,109), new Point(268,109), new Point(268,110), new Point(268,111), new Point(268,111), new Point(268,112), new Point(268,112), new Point(268,113), new Point(268,114), new Point(268,114), new Point(268,115), new Point(268,115), new Point(268,116), new Point(268,116), new Point(268,117), new Point(268,117), new Point(268,118), new Point(268,119), new Point(268,119), new Point(268,120), new Point(268,120), new Point(268,121), new Point(268,121), new Point(268,122), new Point(268,122), new Point(268,123), new Point(268,123), new Point(268,124), new Point(268,124), new Point(268,125), new Point(268,126), new Point(268,127), new Point(268,127), new Point(268,128), new Point(268,128), new Point(268,129), new Point(268,129), new Point(268,130), new Point(268,130), new Point(268,131), new Point(268,131), new Point(269,131), new Point(269,131), new Point(269,133), new Point(269,133), new Point(269,134), new Point(269,135), new Point(269,135), new Point(270,136), new Point(270,136), new Point(270,137), new Point(270,137), new Point(271,138), new Point(271,138), new Point(271,139), new Point(271,139), new Point(272,139), new Point(272,139), new Point(272,140), new Point(272,140), new Point(273,141), new Point(273,141), new Point(273,142), new Point(274,143), new Point(274,143), new Point(274,144), new Point(274,144), new Point(275,144), new Point(275,144), new Point(276,145), new Point(276,145), new Point(277,145), new Point(278,146), new Point(279,146), new Point(279,146), new Point(280,147), new Point(280,147), new Point(281,147), new Point(282,148), new Point(282,148), new Point(282,149), new Point(282,149), new Point(283,149), new Point(283,149), new Point(284,149), new Point(284,149), new Point(284,150), new Point(284,150), new Point(285,150), new Point(285,150), new Point(286,150), new Point(286,151), new Point(286,151), new Point(287,151), new Point(287,151), new Point(288,151), new Point(288,151), new Point(289,151), new Point(289,151) ] );
        _dollar.AddGesture("foot-small-l", [ new Point(202,95), new Point(201,95), new Point(201,95), new Point(201,96), new Point(201,96), new Point(201,97), new Point(201,97), new Point(201,98), new Point(201,99), new Point(201,99), new Point(201,100), new Point(201,101), new Point(201,101), new Point(200,102), new Point(200,102), new Point(200,103), new Point(200,103), new Point(200,104), new Point(200,105), new Point(200,105), new Point(200,106), new Point(200,107), new Point(200,107), new Point(200,108), new Point(200,109), new Point(200,110), new Point(200,110), new Point(200,111), new Point(200,112), new Point(200,112), new Point(200,113), new Point(200,113), new Point(200,114), new Point(200,115), new Point(200,115), new Point(199,116), new Point(199,116), new Point(199,117), new Point(199,118), new Point(199,119), new Point(199,119), new Point(199,121), new Point(199,121), new Point(198,122), new Point(198,122), new Point(198,122), new Point(198,123), new Point(198,124), new Point(197,125), new Point(197,125), new Point(197,126), new Point(197,126), new Point(197,127), new Point(197,127), new Point(197,128), new Point(196,129), new Point(196,129), new Point(196,130), new Point(196,131), new Point(196,131), new Point(195,131), new Point(195,131), new Point(195,132), new Point(195,132), new Point(195,133), new Point(194,133), new Point(194,133), new Point(194,134), new Point(194,134), new Point(193,134), new Point(193,134), new Point(193,135), new Point(193,136), new Point(193,136), new Point(192,136), new Point(192,136), new Point(192,137), new Point(192,137), new Point(191,138), new Point(191,138), new Point(190,138), new Point(190,138), new Point(190,139), new Point(190,139), new Point(189,139), new Point(189,139), new Point(188,140), new Point(188,140), new Point(188,141), new Point(188,141), new Point(187,141), new Point(187,142), new Point(187,142), new Point(186,142), new Point(186,142), new Point(186,143), new Point(186,144), new Point(186,144), new Point(185,144), new Point(185,144), new Point(184,144), new Point(184,144), new Point(183,144), new Point(182,144), new Point(182,144), new Point(181,145), new Point(181,145), new Point(180,145), new Point(180,145), new Point(179,145), new Point(178,145), new Point(178,145), new Point(177,145), new Point(177,145), new Point(176,145), new Point(176,145), new Point(175,145), new Point(175,145) ] );
        _dollar.AddGesture("foot-medium-r", [ new Point(248,108), new Point(249,107), new Point(249,108), new Point(249,108), new Point(249,109), new Point(249,110), new Point(249,110), new Point(249,112), new Point(249,113), new Point(249,114), new Point(249,114), new Point(249,116), new Point(249,117), new Point(249,118), new Point(249,120), new Point(249,120), new Point(249,122), new Point(249,122), new Point(249,123), new Point(249,124), new Point(249,126), new Point(249,126), new Point(249,128), new Point(249,128), new Point(249,130), new Point(249,130), new Point(249,131), new Point(249,132), new Point(249,133), new Point(249,133), new Point(249,135), new Point(249,136), new Point(249,137), new Point(249,139), new Point(249,140), new Point(249,141), new Point(249,143), new Point(249,143), new Point(249,145), new Point(249,146), new Point(249,147), new Point(249,149), new Point(249,149), new Point(249,151), new Point(249,152), new Point(249,153), new Point(249,154), new Point(249,155), new Point(249,157), new Point(249,157), new Point(249,159), new Point(249,160), new Point(249,161), new Point(249,162), new Point(249,163), new Point(249,165), new Point(249,165), new Point(250,167), new Point(250,168), new Point(250,169), new Point(250,170), new Point(250,171), new Point(250,172), new Point(250,173), new Point(250,174), new Point(250,175), new Point(250,176), new Point(250,177), new Point(250,177), new Point(250,179), new Point(250,179), new Point(250,181), new Point(250,183), new Point(250,183), new Point(251,185), new Point(251,187), new Point(251,187), new Point(252,188), new Point(252,189), new Point(252,190), new Point(252,191), new Point(253,192), new Point(253,193), new Point(253,194), new Point(253,195), new Point(254,196), new Point(255,196), new Point(256,197), new Point(257,198), new Point(257,198), new Point(259,199), new Point(259,199), new Point(260,200), new Point(261,201), new Point(262,202), new Point(263,204), new Point(263,204), new Point(264,205), new Point(265,206), new Point(266,206), new Point(267,208), new Point(268,208), new Point(269,209), new Point(270,209), new Point(271,210), new Point(271,210), new Point(272,211), new Point(272,212), new Point(273,213), new Point(273,213), new Point(275,214), new Point(276,214), new Point(277,214), new Point(278,215), new Point(278,215), new Point(279,215), new Point(280,216), new Point(280,216) ] );
        _dollar.AddGesture("foot-medium-l", [ new Point(224,109), new Point(224,111), new Point(224,111), new Point(224,112), new Point(224,113), new Point(224,113), new Point(224,115), new Point(224,115), new Point(224,116), new Point(224,118), new Point(224,119), new Point(224,120), new Point(224,122), new Point(224,122), new Point(224,124), new Point(224,125), new Point(224,126), new Point(224,128), new Point(224,129), new Point(224,129), new Point(224,131), new Point(224,133), new Point(224,133), new Point(224,135), new Point(224,136), new Point(224,137), new Point(224,139), new Point(224,139), new Point(224,141), new Point(224,142), new Point(224,143), new Point(224,144), new Point(224,144), new Point(224,146), new Point(224,148), new Point(224,148), new Point(224,150), new Point(224,151), new Point(224,152), new Point(224,153), new Point(224,154), new Point(224,155), new Point(224,156), new Point(224,157), new Point(224,157), new Point(224,159), new Point(224,160), new Point(224,161), new Point(224,161), new Point(224,162), new Point(224,163), new Point(224,165), new Point(224,165), new Point(224,167), new Point(224,167), new Point(224,168), new Point(224,169), new Point(224,169), new Point(224,170), new Point(224,171), new Point(224,172), new Point(223,174), new Point(223,174), new Point(223,175), new Point(223,176), new Point(223,176), new Point(223,177), new Point(223,178), new Point(222,180), new Point(222,180), new Point(222,181), new Point(222,182), new Point(222,183), new Point(222,184), new Point(222,185), new Point(222,185), new Point(221,187), new Point(221,187), new Point(221,189), new Point(221,190), new Point(221,190), new Point(221,191), new Point(220,192), new Point(220,193), new Point(220,194), new Point(219,196), new Point(219,196), new Point(218,197), new Point(218,198), new Point(218,199), new Point(217,200), new Point(216,201), new Point(215,202), new Point(215,202), new Point(214,203), new Point(214,203), new Point(213,203), new Point(212,204), new Point(212,204), new Point(211,204), new Point(211,205), new Point(211,205), new Point(210,206), new Point(209,207), new Point(209,207), new Point(208,207), new Point(207,208), new Point(206,208), new Point(205,209), new Point(205,209), new Point(204,210), new Point(204,210), new Point(203,211), new Point(203,211), new Point(202,211), new Point(202,212), new Point(202,212), new Point(201,212), new Point(201,213), new Point(201,213), new Point(200,213), new Point(200,214) ] );
        _dollar.AddGesture("foot-large-r", [ new Point(262,110), new Point(261,110), new Point(261,111), new Point(261,112), new Point(261,113), new Point(261,114), new Point(261,115), new Point(261,115), new Point(261,118), new Point(261,118), new Point(261,120), new Point(261,121), new Point(260,123), new Point(260,124), new Point(259,127), new Point(259,129), new Point(259,130), new Point(259,133), new Point(259,133), new Point(259,136), new Point(259,136), new Point(259,137), new Point(259,139), new Point(259,139), new Point(259,142), new Point(259,142), new Point(259,144), new Point(259,145), new Point(259,146), new Point(259,148), new Point(259,148), new Point(258,151), new Point(258,151), new Point(258,154), new Point(258,154), new Point(258,156), new Point(258,157), new Point(258,159), new Point(258,160), new Point(258,161), new Point(258,163), new Point(258,163), new Point(258,165), new Point(258,166), new Point(258,167), new Point(258,168), new Point(258,169), new Point(258,171), new Point(258,172), new Point(258,173), new Point(258,175), new Point(258,175), new Point(257,177), new Point(257,177), new Point(257,178), new Point(257,180), new Point(257,181), new Point(257,183), new Point(257,183), new Point(257,186), new Point(257,186), new Point(257,189), new Point(257,189), new Point(257,192), new Point(257,195), new Point(257,195), new Point(257,196), new Point(257,198), new Point(257,198), new Point(257,201), new Point(257,201), new Point(257,204), new Point(257,204), new Point(257,205), new Point(257,207), new Point(257,208), new Point(257,210), new Point(257,211), new Point(257,213), new Point(257,213), new Point(257,215), new Point(257,216), new Point(257,218), new Point(257,219), new Point(257,219), new Point(258,221), new Point(258,222), new Point(258,223), new Point(258,224), new Point(258,225), new Point(258,225), new Point(258,226), new Point(258,227), new Point(258,228), new Point(258,230), new Point(258,231), new Point(258,232), new Point(258,234), new Point(258,234), new Point(258,236), new Point(258,237), new Point(258,239), new Point(258,240), new Point(258,241), new Point(258,242), new Point(258,243), new Point(258,244), new Point(258,246), new Point(258,246), new Point(258,248), new Point(258,249), new Point(258,250), new Point(258,251), new Point(258,252), new Point(258,252), new Point(258,254), new Point(258,255), new Point(258,255), new Point(258,257), new Point(258,258), new Point(258,258), new Point(258,260), new Point(258,261), new Point(259,263), new Point(259,264), new Point(259,264), new Point(261,265), new Point(261,265), new Point(262,266), new Point(263,268), new Point(263,270), new Point(264,271), new Point(264,271), new Point(265,273), new Point(266,274), new Point(267,275), new Point(268,276), new Point(270,278), new Point(270,278), new Point(272,279), new Point(273,280), new Point(275,281), new Point(276,281), new Point(278,281), new Point(279,281), new Point(280,282), new Point(282,283), new Point(283,283), new Point(283,283) ] );
        _dollar.AddGesture("foot-large-l", [ new Point(227,110), new Point(228,109), new Point(228,111), new Point(228,112), new Point(228,114), new Point(228,114), new Point(228,117), new Point(228,120), new Point(228,120), new Point(228,123), new Point(228,125), new Point(228,126), new Point(228,129), new Point(228,130), new Point(228,132), new Point(228,134), new Point(228,135), new Point(228,138), new Point(228,141), new Point(228,142), new Point(228,144), new Point(228,147), new Point(228,149), new Point(228,150), new Point(228,153), new Point(228,156), new Point(228,157), new Point(228,159), new Point(228,162), new Point(228,162), new Point(228,165), new Point(228,168), new Point(228,168), new Point(228,171), new Point(228,173), new Point(228,174), new Point(228,177), new Point(228,178), new Point(228,180), new Point(228,181), new Point(228,183), new Point(228,184), new Point(228,186), new Point(228,189), new Point(228,190), new Point(228,193), new Point(228,194), new Point(228,196), new Point(228,199), new Point(228,200), new Point(228,201), new Point(228,202), new Point(228,203), new Point(228,205), new Point(228,206), new Point(228,208), new Point(228,211), new Point(228,211), new Point(228,214), new Point(228,216), new Point(228,217), new Point(228,219), new Point(228,220), new Point(228,222), new Point(228,223), new Point(228,224), new Point(228,225), new Point(228,226), new Point(228,228), new Point(228,229), new Point(228,232), new Point(228,232), new Point(228,235), new Point(228,237), new Point(228,238), new Point(228,239), new Point(228,240), new Point(228,241), new Point(227,242), new Point(226,244), new Point(226,245), new Point(226,247), new Point(226,247), new Point(226,249), new Point(225,250), new Point(225,250), new Point(225,252), new Point(225,252), new Point(225,254), new Point(224,255), new Point(224,255), new Point(224,257), new Point(223,258), new Point(223,258), new Point(223,259), new Point(222,260), new Point(222,260), new Point(222,261), new Point(221,261), new Point(221,262), new Point(220,264), new Point(219,265), new Point(218,265), new Point(218,266), new Point(218,267), new Point(218,267), new Point(217,267), new Point(217,269), new Point(217,270), new Point(216,271), new Point(215,271), new Point(212,272), new Point(212,272), new Point(211,273), new Point(210,274), new Point(210,274), new Point(207,275), new Point(206,275), new Point(204,275), new Point(204,275), new Point(203,276), new Point(202,276), new Point(201,276), new Point(199,276), new Point(199,276), new Point(198,277), new Point(197,277), new Point(197,278), new Point(197,278) ] );
      }
    }

    function initTouch() {
      _touchTracker = new tts.MouseAndTouchTracker( _canvas, function( touchState ){
        switch( touchState ) {
          case tts.MouseAndTouchTracker.state_start :
            gestureStart();
            MobileUtil.lockTouchScreen(true);
            break;

          case tts.MouseAndTouchTracker.state_move :
            gestureMove();
            break;

          case tts.MouseAndTouchTracker.state_end :
            gestureEnd();
            MobileUtil.lockTouchScreen(false);
            break;
        }
      }, false, 'canvas' );
    }

    function gestureStart() {
      _ctx.clearRect(0, 0, _ctx.canvas.width, _ctx.canvas.height);
      updateBoxTroll();
      _points = [];
      _points[0] = new Point(_touchTracker.touchcurrent.x, _touchTracker.touchcurrent.y);
      _ctx.fillRect(_touchTracker.touchcurrent.x - 4, _touchTracker.touchcurrent.y - 3, 9, 9);

      initCustomGestures( (_touchTracker.touchcurrent.y < _canvas.height / 2) );
    }

    function gestureMove() {
      _points.push( new Point(_touchTracker.touchcurrent.x, _touchTracker.touchcurrent.y) );
      drawConnectedPoint(_ctx, _points[_points.length - 2], _points[_points.length - 1]);
    }

    function gestureEnd() {
      if (_points.length >= 10) {
        var result = _dollar.Recognize(_points, true);
        drawText("Result: " + result.Name + " (" + round(result.Score,2) + ").");

        _pointsResult.innerHTML = '_dollar.AddGesture("gestureName", [ new ' + _points.join(', new ') + ' ] );';
        drawText( 'gesture body part id: '+getbodyPartForGesture( result.Name ) );

        CanvasUtil.loadImageToContext("./demo/"+ result.Name +".png", function( loaderContext, image ){
          // store image ref into body part hash
          _imageLayers[ getbodyPartForGesture( result.Name ) ] = image;
          _ctx.clearRect(0, 0, _ctx.canvas.width, _ctx.canvas.height);
          updateBoxTroll();
        });
      } else {
        drawText("Too few points made. Please try again.");
      }
    }

    function drawText(str)
    {
      _status.innerHTML = str;
    }
    function drawConnectedPoint(context, fromPoint, toPoint)
    {
      context.beginPath();
      context.moveTo(fromPoint.X, fromPoint.Y);
      context.lineTo(toPoint.X, toPoint.Y);
      context.closePath();
      context.stroke();
    }
    function round(n, d) // round 'n' to 'd' decimals
    {
      d = Math.pow(10, d);
      return Math.round(n * d) / d
    }

    function initImageLayers() {
      _layerGestures = {
        'head': ["head-1", "head-2", "head-3", "head-4"],
        'box': ["box-1", "box-2", "box-3"],
        'leg-l': ["foot-small-l", "foot-medium-l", "foot-large-l"],
        'leg-r': ["foot-small-r", "foot-medium-r", "foot-large-r"],
        'arm-l': ["arm-up-l", "arm-2-l", "arm-3-l"],
        'arm-r': ["arm-up-r", "arm-2-r", "arm-3-r"],
      };
      _imageLayers = {
        'leg-l': null,
        'leg-r': null,
        'arm-l': null,
        'arm-r': null,
        'box': null,
        'head': null
      };
    };

    function getbodyPartForGesture( gestureId ) {
      for(var gesture in _layerGestures) {
        if( _layerGestures[gesture].indexOf(gestureId) != -1 ) {
          return gesture;
        }
      }
      return null;
    }

    function updateBoxTroll() {
      for(var layer in _imageLayers) {
        if( _imageLayers[layer] != null ) {
          _ctx.save();
          _ctx.translate( (_canvas.width-_imageLayers[layer].width) / 2, (_canvas.height-_imageLayers[layer].height) / 2 );
          _ctx.drawImage( _imageLayers[layer], 0, 0 );
          _ctx.restore();
        }
      }
    };

    init();



    function leapToScene( frame , leapPos ){

      var iBox = frame.interactionBox;

      var left = iBox.center[0] - iBox.size[0]/2;
      var top = iBox.center[1] + iBox.size[1]/2;

      var x = leapPos[0] - left;
      var y = leapPos[1] - top;

      x /= iBox.size[0];
      y /= iBox.size[1];

      x *= _canvas.width;
      y *= _canvas.height;

      return [ x , -y ];
    }

    // leap stuff
    var lastLeapPos = null;
    var controller = new Leap.Controller();
    controller.on( 'frame' , function( data ) {
      frame = data;
      
      if( frame.hands.length > 0 ) {
        if( Math.abs( frame.hands[0].palmPosition[2] ) < 100 ) { 
          var handPos = leapToScene( frame , frame.hands[0].palmPosition );
          _touchTracker.touchcurrent.x = handPos[0];
          _touchTracker.touchcurrent.y = handPos[1];

          if( lastLeapPos == null ) {
            lastLeapPos = handPos;
            gestureStart();
          } else {
            gestureMove();
          }
          // console.log(frame.hands[0].palmPosition,handPos[0],handPos[1]);
        }
      } else {
        if( lastLeapPos != null ) {
          gestureEnd();
          lastLeapPos = null;
        }
      }

    });
    controller.connect();

  </script>
</body>
</html>