function Obj(a,b,c,d){this.element=a;this.size=MathUtil.randRange(20,80);this.x=b/2;this.y=c/2;this.vector_x=MathUtil.randRange(-20,20);this.vector_y=MathUtil.randRange(-20,20);this.gravity=0.5;this.bounce_threshold=1.3;this.floor_bounce=-0.6;this.platform_helper=d;$(this.element).css({"background-color":ColorUtil.randomColor(),width:this.size,height:this.size});this.platform_helper.update2DPosition(this.element,Math.round(this.x),Math.round(this.y));var e=this;new ButtonTouchCallback(this.element,
function(){$(e.element).css({"background-color":ColorUtil.randomColor()})},true)}Obj.prototype.center=function(a,b){this.x=a/2;this.y=b/2};
Obj.prototype.update=function(a,b,c,d){this.vector_x*=0.98;this.vector_y+=this.gravity;this.vector_x+=c*0.96/this.size;this.vector_y+=d*0.96/this.size;c=this.x+this.vector_x;d=this.y+this.vector_y;if(c>a-this.size||c<0)this.vector_x*=-1;if(d>b-this.size)this.vector_y=this.vector_y<this.bounce_threshold?0:this.vector_y*=this.floor_bounce;if(d<0)this.vector_y*=-1;this.x+=this.vector_x;this.y+=this.vector_y;this.platform_helper.update2DPosition(this.element,Math.round(this.x),Math.round(this.y))};
function WindBounce(){this.init()}
WindBounce.prototype.init=function(){this.app_height=this.app_width=0;this.app_container=false;this.timer_fps=1E3/60;this.num_elements=20;this.objs=[];this.touch_tracker=false;this.bgY=this.bgX=this.windY=this.windX=this.move_count=0;this.CSS_HAND="cursor:hand; cursor:grab; cursor:-moz-grab; cursor:-webkit-grab;";this.CSS_HAND_CUR="cursor: url(images/cursors/openhand.cur), default !important;";this.CSS_HAND_GRAB="cursor:grabbing; cursor:-moz-grabbing; cursor:-webkit-grabbing;";this.CSS_HAND_GRAB_CUR=
"cursor: url(images/cursors/closedhand.cur), default !important;";this.start()};
WindBounce.prototype.start=function(){this.detectAppSize();this.setBrowserProperties();this.platform_helper=new PlatformHelper;this.app_container=document.createElement("div");this.app_container.id="site";document.body.appendChild(this.app_container);for(var a=0;a<this.num_elements;a++){var b=document.createElement("div");b.className="obj";this.app_container.appendChild(b);this.objs.push(new Obj(b,this.app_width,this.app_height,this.platform_helper))}this.touch_tracker=new MouseAndTouchTracker(this.app_container,
this,false);this.base_inline_css=document.body.getAttribute("style")||"";this.cursorSetHand();this.runTimer()};WindBounce.prototype.touchUpdated=function(a){a==MouseAndTouchTracker.state_start&&this.cursorSetGrabbyHand();a==MouseAndTouchTracker.state_end&&this.cursorSetHand();if(a==MouseAndTouchTracker.state_move){this.windX+=this.touch_tracker.touchspeed.x;this.windY+=this.touch_tracker.touchspeed.y}};
WindBounce.prototype.runTimer=function(){this.detectAppSize();$(this.app_container).css({width:this.app_width,height:this.app_height,"background-position":this.bgX+"px "+this.bgY+"px"});this.windX*=0.9;this.windY*=0.9;this.bgX+=this.windX*0.1;this.bgY+=this.windY*0.1;for(var a=0;a<this.num_elements;a++)this.objs[a].update(this.app_width,this.app_height,this.windX,this.windY);var b=this;setTimeout(function(){b.runTimer()},this.timer_fps)};
WindBounce.prototype.setBrowserProperties=function(){document.ontouchmove=function(b){b.preventDefault()};var a=this;if(window.orientation!==undefined)window.onorientationchange=function(){window.scrollTo(0,1);a.detectAppSize();for(var b=0;b<a.num_elements;b++)a.objs[b].center(a.app_width,a.app_height)}};
WindBounce.prototype.detectAppSize=function(){var a=0,b=0;if(typeof window.innerWidth=="number"){a=window.innerWidth;b=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){a=document.body.clientWidth;b=document.body.clientHeight}this.app_width=a;this.app_height=b};
WindBounce.prototype.cursorSetDefault=function(){document.body.setAttribute("style",this.base_inline_css)};WindBounce.prototype.cursorSetHand=function(){this.platform_helper.is_chrome||this.platform_helper.is_msie?document.body.setAttribute("style",this.base_inline_css+this.CSS_HAND+this.CSS_HAND_CUR):document.body.setAttribute("style",this.base_inline_css+this.CSS_HAND)};
WindBounce.prototype.cursorSetGrabbyHand=function(){this.platform_helper.is_chrome||this.platform_helper.is_msie?document.body.setAttribute("style",this.base_inline_css+this.CSS_HAND_GRAB+this.CSS_HAND_GRAB_CUR):document.body.setAttribute("style",this.base_inline_css+this.CSS_HAND_GRAB)};$(window).load(function(){setTimeout(function(){window.scrollTo(0,1)},1E3)});$(document).ready(function(){new WindBounce});
